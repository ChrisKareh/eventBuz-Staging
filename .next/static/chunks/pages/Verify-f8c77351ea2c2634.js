(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{880:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Verify",function(){return o(5058)}])},5058:function(e,t,o){"use strict";o.r(t);var n=o(5893),a=o(8386),s=o(7294),r=o(604),l=o(1649),c=o(1163),i=o(2920);o(9896),t.default=function(){let e=(0,c.useRouter)(),{param:t}=e.query;(0,s.useEffect)(()=>{let e=localStorage.getItem("isInitialVisit");e||((0,r.hh)(),(0,r.YW)(),localStorage.setItem("isInitialVisit","completed"))},[]);let o=(0,l.v9)(e=>e.data.statusMessage),d=(0,l.v9)(e=>e.data.phoneVerified),p=(0,l.v9)(e=>e.data.emailVerified),[u,h]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),y=e=>(0,n.jsx)("input",{...e});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{backgroundColor:"#25282D",display:"grid"},children:(0,n.jsxs)("div",{className:"verifyContainerRow",children:[(0,n.jsxs)("div",{className:"verifyDiv",style:{display:p?"none":"block"},children:[(0,n.jsx)("p",{className:"p1",children:"Verify Email"}),(0,n.jsx)("p",{className:"p2",children:"An OTP has been sent to your entered email"}),(0,n.jsxs)("div",{className:"otpElements",children:[(0,n.jsx)("p",{className:"p3",children:"Enter your Code here"}),(0,n.jsx)("div",{className:"otp",children:(0,n.jsx)(a.Z,{renderInput:y,onChange:function(e){h(e)},value:u,inputStyle:"inputStyle",numInputs:6,separator:(0,n.jsx)("span",{})})}),(0,n.jsx)("p",{className:"p3",children:"Didn't receive the code?"}),(0,n.jsx)("button",{onClick:()=>{(0,r.hh)()},className:"VerifyBttn",style:{width:90,height:40,marginTop:10,backgroundColor:"black",color:"pink",fontSize:15},children:"Resend"})]}),(0,n.jsx)("button",{style:{backgroundColor:"black",color:"pink"},onClick:()=>{console.log("THe code",u),(0,r.lm)(u),setTimeout(()=>{200==o?e.push("/userProfile"):i.Am.error("Something went wrong please try again")},1e3)},className:"VerifyBttn",type:"submit",children:"Verify"})]}),(0,n.jsxs)("div",{className:"verifyDiv",style:{display:d?"none":"block"},children:[(0,n.jsx)("p",{className:"p1",children:"Verify Phone Number"}),(0,n.jsx)("p",{className:"p2",children:"An OTP has been sent to your entered Phone Number"}),(0,n.jsxs)("div",{className:"otpElements",children:[(0,n.jsx)("p",{className:"p3",children:"Enter your Code here"}),(0,n.jsx)("div",{className:"otp",children:(0,n.jsx)(a.Z,{renderInput:y,onChange:function(e){g(e)},value:m,inputStyle:"inputStyle",numInputs:6,separator:(0,n.jsx)("span",{})})}),(0,n.jsx)("p",{className:"p3",children:"Didn't receive the code?"}),(0,n.jsx)("button",{onClick:()=>{(0,r.hh)()},className:"VerifyBttn",style:{width:90,height:40,marginTop:10,backgroundColor:"black",color:"pink",fontSize:15},children:"Resend"})]}),(0,n.jsx)("button",{style:{backgroundColor:"black",color:"pink"},onClick:()=>{console.log("THe code",u),(0,r.lm)(u),setTimeout(()=>{200==o?e.push("/userProfile"):i.Am.error("Something went wrong please try again")},timeout)},className:"VerifyBttn",type:"submit",children:"Verify"}),(0,n.jsx)("button",{style:{backgroundColor:"black",color:"pink"},onClick:()=>{Router.push("/userProfile")},className:"VerifyBttn",type:"submit",children:"Skip"})]})]})})})}},604:function(e,t,o){"use strict";o.d(t,{A:function(){return f},YW:function(){return u},fv:function(){return c},hh:function(){return d},i0:function(){return g},le:function(){return h},lm:function(){return p},oP:function(){return i},tO:function(){return y},yM:function(){return m}});var n=o(6154),a=o(3330),s=o(2920),r=o(5279),l=o(2564);o(9332),o(1649);let c=(e,t,a,c,i,d,p,u,h,m)=>{let g=o(6230),y=new g;y.append("name",e),y.append("family_name",t),y.append("email",a),y.append("gender",c),y.append("phone",i),y.append("country",d),y.append("nationality",p),y.append("dob",u),y.append("sign_in_type",m),y.append("role",h),console.log("EMAIL",a),n.Z.request({method:"post",maxBodyLength:1/0,url:"https://jonathana74.sg-host.com/event-buz-backend-main/api/v1/register",headers:{"Content-Type":"application/json"},data:y}).then(e=>{console.log(e),s.Am.success("Sign Up Completed"),e.status=200,localStorage.setItem("access_Token",e.data.access_token),l.y.dispatch((0,r.km)(e.status))}).catch(e=>{e.response?(console.log("Only the error message",e.response.data.errors),s.Am.error("Email or Phone Number exist"),console.log("Data:",e.response.data),console.log("Status:",e.response.status),console.log("Headers:",e.response.headers)):e.request?(s.Am.error("Something went wrong please try again"),console.log("Request:",e.request)):(s.Am.error("Something went wrong please try again"),console.log("Error:",e.message))})},i=async(e,t)=>{await n.Z.request({method:"post",maxBodyLength:1/0,url:a.ab,headers:{"Content-Type":"application/json"},data:{email:e}}).then(e=>{if(console.log("CHECK EMAIL",e.data.access_token),console.log("Check Email Response",e),200==e.status){l.y.dispatch((0,r.km)(e.status)),console.log(e.data.phoneVerified);let o=!e.data.phoneVerified||!e.data.emailVerified;l.y.dispatch((0,r.s0)(e.data.phoneVerified)),l.y.dispatch((0,r.Fu)(e.data.emailVerified)),localStorage.setItem("access_Token",e.data.access_token),t(e.status,o?"Your account isn't verified":"")}else t(e.status,"Something went wrong.")}).catch(e=>{e.response?(console.log("DATA-ERROR:",e.response.data.message),console.log("STATUS-ERROR",e.response.status),console.log("HEADERS-ERROR",e.response.error),t(e.response.status,e.response.data.message)):e.request?(console.log("REQUEST-ERROR",e.request),t(500,"Server did not respond")):(t(500,e.message),console.log("ERROR-MESSAGE",e.message))})},d=()=>{let e=localStorage.getItem("access_Token");console.log("TOKEN IN resendVerificationCode",e),n.Z.request({method:"post",maxBodyLength:1/0,url:a.xw,headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},p=e=>{let t=localStorage.getItem("access_Token");console.log("TOKEN in verifyEmail Function",t),console.log(e),n.Z.request({method:"post",maxBodyLength:1/0,url:a.yT,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},data:{verification_code:e}}).then(e=>{console.log(e),200==e.status&&l.y.dispatch((0,r.km)(e.status))}).catch(e=>{console.log(e)})},u=e=>{n.Z.request({method:"post",maxBodyLength:1/0,url:a.X,headers:{"Content-Type":"application/json"},data:{phone:e,message:"ayo put dat numba"}}).then(e=>{console.log(e),200==e.status&&l.y.dispatch((0,r.km)(e.status))}).catch(e=>{console.log(e)})},h=async()=>{await n.Z.request({method:"get",maxBodyLength:1/0,url:a.It,headers:{"Content-Type":"application/json"}}).then(e=>{let t=e.data.data.map(e=>({label:e.name,value:e.id}));l.y.dispatch((0,r.yg)(t))}).catch(e=>{console.log(e)})},m=async(e,t)=>{console.log(typeof e),console.log("Data passed to API",e);let n=o(7218),a=localStorage.getItem("access_Token");console.log("TOKEN in verifyEmail Function",a),n.request({method:"post",maxBodyLength:1/0,url:"https://jonathana74.sg-host.com/event-buz-backend-main/api/v1/create-event",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+a},data:e}).then(e=>{console.log(JSON.stringify(e.data)),localStorage.setItem("createEvent_ID",e.data.data.id),s.Am.success("General Information Saved")}).catch(e=>{console.log(e),s.Am.error("Error occured, try again"),t()})},g=async(e,t)=>{let n=o(7218),a=localStorage.getItem("access_Token"),r=localStorage.getItem("createEvent_ID"),l={method:"post",maxBodyLength:1/0,url:"https://jonathana74.sg-host.com/event-buz-backend-main/api/v1/create-event-contact",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+a},data:{...e,event_id:r}};n.request(l).then(e=>{console.log(JSON.stringify(e.data))}).catch(e=>{console.log(e),s.Am.error("Error occured, please try again"),t()})},y=async(e,t)=>{let n=o(7218),a=localStorage.getItem("access_Token"),r=localStorage.getItem("createEvent_ID");console.log(e);let l={method:"post",maxBodyLength:1/0,url:"https://jonathana74.sg-host.com/event-buz-backend-main/api/v1/create-event-social-media/",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+a},data:{...e,event_id:r}};n.request(l).then(e=>{console.log(JSON.stringify(e.data))}).catch(e=>{console.log(e),s.Am.error("Error Occured, Please Try Again"),t()})},f=async()=>{let e=o(7218);e.request({method:"get",maxBodyLength:1/0,url:"https://jonathana74.sg-host.com/event-buz-backend-main/api/v1/currency/all",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{console.log(e.data.data);let t=e.data.data.map(e=>({label:e.name,value:e.id}));l.y.dispatch((0,r.BI)(t))}).catch(e=>{console.log(e)})}}},function(e){e.O(0,[977,675,613,896,774,888,179],function(){return e(e.s=880)}),_N_E=e.O()}]);